(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/create/create"],{"1a89":function(t,e,i){"use strict";i.r(e);var s=i("8488"),n=i("efb1");for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);i("966c");var r=i("2877"),o=Object(r["a"])(n["default"],s["a"],s["b"],!1,null,"7e9c6a9c",null);e["default"]=o.exports},"1d6e":function(t,e,i){},8488:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.browse=!t.browse})},n=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return n})},"966c":function(t,e,i){"use strict";var s=i("1d6e"),n=i.n(s);n.a},"9ff4":function(t,e,i){"use strict";(function(t){i("ae7a"),i("921b");s(i("66fd"));var e=s(i("1a89"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},efb1:function(t,e,i){"use strict";i.r(e);var s=i("f482"),n=i.n(s);for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);e["default"]=n.a},f482:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{minNumber:1,priceTimes:0,minUnitPrice:0,minBrowsePrice:0,content:"",imgLimit:2,maxLenContent:700,contentLeftLen:0,cate_id:"",browse:!1,browse_times:[],browse_task:[],url:"",repeat:0,repeatIndex:0,repeat_times:[],time:"",step:[],title:"",money:"",number:""}},onLoad:function(t){this.cate_id=t.id},created:function(){this.contentLeftLen=this.maxLenContent;var t=this.$api.getConfig("",this.$api.SYSTEM_CONFIG);this.priceTimes=t.releases_price_times||0,this.minNumber=t.min_releases_number||1,this.minUnitPrice=t.min_releases_price||0,this.repeat_times=t.task_repeat||[],this.browse_task=t.browse_task_config||{},this.browse_times=Object.keys(this.browse_task)},watch:{content:function(t){this.content=t,this.contentLeftLen=this.maxLenContent-this.content.length},time:function(t){this.time=t,this.minBrowsePrice=this.browse_task[this.time]}},methods:{addStep:function(){this.step.length>=5?this.$api.msg("任务最多5步"):this.step.push({check:!1,mark:"",img:""})},repeatChange:function(t){this.repeatIndex=t.detail.value,this.repeat=this.repeat_times[t.detail.value].time},browseTimeChange:function(t){this.time=this.browse_times[t.detail.value]},delStep:function(t){this.step.splice(t.target.dataset.id,1)},stepCheck:function(t){this.step[t.target.dataset.id].check=t.target.value},stepMark:function(t){this.step[t.target.dataset.id].mark=t.target.value},stepImg:function(t){var e=this;this.$api.uploadImage(function(i){e.step[t.target.dataset.id].img=i},this.imgLimit)},delStepImg:function(t){this.step[t.target.dataset.id].img=""},submitContent:function(){var e=this;if(this.content)if(this.content.length<10)this.$api.msg("内容最低10个字");else if(this.cate_id)if(this.title)if(this.money)if(this.number){var i=this.browse?this.minBrowsePrice:this.minUnitPrice;if(this.money<i)this.$api.msg("每笔发布金额不得少于"+i+"元");else if(0===this.priceTimes||1e4*this.money%(1e4*this.priceTimes)===0)if(this.number%1===0)if(this.number<this.minNumber)this.$api.msg("发布数量最低"+this.minNumber+"份");else{if(this.browse){if(!this.url||!this.$api.isUrl(this.url))return void this.$api.msg("请填写正确的浏览网址");this.step=[]}else if(this.repeat=0,0==this.step.length)return void this.$api.msg("请添加操作步骤");this.$api.modal("禁止发布黄赌毒以及涉政等一切法律锁禁止的内容，如有发现将直接封停账户","确认发布",function(i){i.confirm&&e.$api.post("lists/demand",{title:e.title,cate_id:e.cate_id,money:e.money,number:e.number,step:e.step,browse:e.browse?1:0,time:e.time,url:e.url,repeat:e.repeat,content:e.content},function(e){0==e.code&&t.navigateTo({url:"/pages/detail/detail?id="+e.data})})})}else this.$api.msg("发布数量不能为小数");else this.$api.msg("发布金额必须是"+this.priceTimes+"的整数倍")}else this.$api.msg("请输入单量");else this.$api.msg("请输入金额");else this.$api.msg("请输入标题");else this.$api.msg("请选择类型");else this.$api.msg("请输入任务介绍")}}};e.default=i}).call(this,i("6e42")["default"])}},[["9ff4","common/runtime","common/vendor"]]]);