(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/detail"],{"042a":function(t,e,i){},"0e32":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.checkShow=!1},t.e1=function(e){t.checkStatus=!t.checkStatus},t.e2=function(e){t.checkShow=!1})},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},"22be":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("a34a"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e,i,a,n,o,s){try{var c=t[o](s),r=c.value}catch(u){return void i(u)}c.done?e(r):Promise.resolve(r).then(a,n)}function s(t){return function(){var e=this,i=arguments;return new Promise(function(a,n){var s=t.apply(e,i);function c(t){o(s,a,n,c,r,"next",t)}function r(t){o(s,a,n,c,r,"throw",t)}c(void 0)})}}var c={data:function(){return{contact:{phone:"",weixin:""},loaded:!1,checkShow:!1,checkStatus:!0,checkReason:"",userinfo:{},modelImg:"",detail:{id:0,status:0,title:"",stock:"",price:"",content:"",create_time:"",update_time:"",material:{}}}},created:function(){this.userinfo=this.$api.getConfig()},methods:{onLoad:function(){var t=s(a.default.mark(function t(e){return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.loaded=!0,this.initData(e.id);case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),addStepImg:function(t){var e=this;this.$api.uploadImage(function(i){e.detail.material.step.splice(t.target.dataset.id,1,i)})},copyStr:function(e){t.setClipboardData({data:e.target.dataset.str})},formatDate:function(t){var e=t.getFullYear(),i=t.getMonth()+1,a=t.getDate(),n=t.getHours(),o=t.getMinutes(),s=t.getSeconds();return e+"-"+i+"-"+a+" "+n+":"+o+":"+s},callPhone:function(e){t.setClipboardData({data:e}),t.makePhoneCall({phoneNumber:e})},callWx:function(e){t.setClipboardData({data:e});setTimeout(function(){"Android"==plus.os.name?plus.runtime.launchApplication({pname:"com.tencent.mm"},function(t){}):"iOS"==plus.os.name&&plus.runtime.launchApplication({action:"weixin://"},function(t){})},1500)},done:function(){var t=this;if(1==this.detail.status){var e=getCurrentPages(),i=e[e.length-1];i.$vm.time<1&&this.$api.post("order/submitTask",{id:this.detail.id},function(e){0==e.code&&(t.initData(t.detail.id),t.$api.msg("任务完成"))})}},showImg:function(t){this.$api.previewImage([t.target.dataset.src])},delStepImg:function(t){this.detail.material.step.splice(t.target.dataset.id,1,"")},initData:function(e){var i=this;t.showLoading(),this.$api.post("order/detail",{id:e},function(e){if(t.hideLoading(),0==e.code){if(!e.data.material)for(var a in e.data.material={mark:"",step:[]},e.data.lists.step)e.data.lists.step[a].check&&(e.data.material.step[a]="");i.detail=e.data,i.userinfo.username===i.detail.listsuser.username?(i.contact.phone=i.detail.user.phone,i.contact.weixin=i.detail.user.weixin):(i.contact.phone=i.detail.listsuser.phone,i.contact.weixin=i.detail.listsuser.weixin)}},function(){t.hideLoading()})},goDetail:function(){t.navigateTo({url:"/pages/detail/detail?id="+this.detail.lists_id})},check:function(){this.checkShow=!0},queryCheck:function(){var e=this;this.checkShow=!1,this.$api.post("order/check",{id:this.detail.id,status:this.checkStatus?1:0,reason:this.checkReason},function(i){0==i.code&&e.$api.modal("审核成功","",function(){t.navigateBack()})})},closeLists:function(){var e=this;this.$api.modal("确认取消任务？","",function(i){i.confirm&&e.$api.post("order/delete",{id:e.detail.id},function(e){0==e.code&&t.navigateBack()})})},submitOrder:function(){var e=this;for(var i in this.detail.material.step)if(!this.detail.material.step[i])return void this.$api.msg("请上传第"+(1*i+1)+"步截图");this.$api.modal("确认提交任务？","",function(i){i.confirm&&e.$api.post("order/submitTask",{id:e.detail.id,material:e.detail.material},function(i){0==i.code&&e.$api.modal("提交成功","",function(){t.navigateBack()})})})},browse:function(){1==this.detail.lists.browse?t.navigateTo({url:"/pages/h5/browse?t="+this.detail.title+"&s="+this.detail.lists.time+"&p="+encodeURIComponent(this.detail.lists.url)}):this.$api.msg("当前任务不是浏览任务！")}}};e.default=c}).call(this,i("6e42")["default"])},3715:function(t,e,i){"use strict";i.r(e);var a=i("0e32"),n=i("d83c");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("b6ba");var s=i("2877"),c=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"29386920",null);e["default"]=c.exports},"93d7":function(t,e,i){"use strict";(function(t){i("ae7a"),i("921b");a(i("66fd"));var e=a(i("3715"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},b6ba:function(t,e,i){"use strict";var a=i("042a"),n=i.n(a);n.a},d83c:function(t,e,i){"use strict";i.r(e);var a=i("22be"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a}},[["93d7","common/runtime","common/vendor"]]]);